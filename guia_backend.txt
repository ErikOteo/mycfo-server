*Procedimiento para levantar el backend*

Nos paramos en la carpeta mycfo y abrimos un cmd.

Limpiar entorno anterior:
docker rm -f mysql

Levantamos la base de datos mysql:
docker-compose up -d mysql                  // antes decia: docker-compose up --build mysql

----------------------------------------------------------------------------------------------------------
Configuración de Microservicios (IntelliJ IDEA)
Para ejecutar los microservicios localmente, se debe activar el perfil dev en cada uno de ellos. Esto fuerza la lectura del archivo application-dev.properties (credenciales locales) sobre el archivo estándar (credenciales Azure).

Servicios a configurar:
- AdministracionApplication
- RegistroApplication
- ReporteApplication
- IaApplication
- NotificacionApplication
- PronosticoApplication

Pasos de configuración:

1. En IntelliJ, ir al menú Run > Edit Configurations...

2. Seleccionar el servicio a configurar en la lista izquierda.

3. Localizar el campo Active profiles.

    -Caso A: El campo está visible: Escribir dev.

    -Caso B: El campo NO está visible:

        1. Hacer clic en Modify options (texto azul o Alt+M).

        2. Seleccionar Add VM options.

        3. En el nuevo campo que aparece, ingresar el siguiente comando: -Dspring.profiles.active=dev

Nota: Repetir este procedimiento para cada uno de los 6 microservicios listados arriba.

4. Orden de Ejecución
Para garantizar la correcta comunicación entre servicios, se recomienda seguir este orden de inicio:

    1. GatewayApplication (Puerto :8090).

    2. Resto de Microservicios (Administración, Registro, IA, etc.).

    3. Frontend:
        cd frontend
        npm start

El sistema estará accesible en: http://localhost:3000

----------------------------------------------------------------------------------------------------------
PARA DESARROLLO CORRER EL MODULO EN INTELLIJ

(OPCIONAL PARA REALIZAR PRUEBAS DE INTEGRACION DE MODULOS)

Luego compilamos uno o varios modulos del backen en Intellij con clean y package.

Procedemos a levantar los modulos:

docker-compose up --build

Tambien se puede levantar individualmente cada modulo si hace falta:

docker-compose up --build registro

Para apagar todos los contenedores utilizamos Docker Desktop el comando:

docker-compose stop

----------------------------------------

Comandos extra:

docker-compose up: Crear los contenedores (servicios) que están descritos en el docker-compose.yml.
docker-compose up -d: Crear en modo detach los contenedores (servicios) que están descritos en el docker-compose.yml. Eso significa que no muestran mensajes de log en el terminal y que se nos vuelve a mostrar un prompt.
docker-compose stop: Detiene los contenedores que previamente se han lanzado con docker-compose up.
docker-compose run: Inicia los contenedores descritos en el docker-compose.yml que estén parados.
docker-compose rm: Borra los contenedores parados del escenario. Con las opción -f elimina también los contenedores en ejecución.
docker-compose pause: Pausa los contenedores que previamente se han lanzado con docker-compose up.
docker-compose unpause: Reanuda los contenedores que previamente se han pausado.
docker-compose restart: Reinicia los contenedores. Orden ideal para reiniciar servicios con nuevas configuraciones.
docker-compose down: Para los contenedores, los borra y también borra las redes que se han creado con docker-compose up (en caso de haberse creado).
docker-compose down -v: Para los contenedores y borra contenedores, redes y volúmenes.
docker-compose logs: Muestra los logs de todos los servicios del escenario. Con el parámetro -fpodremos ir viendo los logs en “vivo”.
docker-compose logs servicio1: Muestra los logs del servicio llamado servicio1 que estaba descrito en el docker-compose.yml.
docker-compose exec servicio1 /bin/bash: Ejecuta una orden, en este caso /bin/bash en un contenedor llamado servicio1 que estaba descrito en el docker-compose.yml
docker-compose build: Ejecuta, si está indicado, el proceso de construcción de una imagen que va a ser usado en el docker-compose.yml a partir de los ficheros Dockerfile que se indican.
docker-compose top: Muestra los procesos que están ejecutándose en cada uno de los contenedores de los servicios.
