spring.application.name=gateway
server.port=${GATEWAY_PORT:8090}

# --- VARIABLES DE URL (Valores por defecto a Localhost) ---
ADMINISTRACION_URL=http://localhost:8081
REGISTRO_URL=http://localhost:8086
NOTIFICACION_URL=http://localhost:8084
IA_URL=http://localhost:8083
PRONOSTICO_URL=http://localhost:8085
REPORTE_URL=http://localhost:8087
FORECAST_URL=http://localhost:8088

# ==========================================
# RUTAS MANUALES (DEFINITIVAS)
# ==========================================

# 1. ADMINISTRACION (routes[0])
spring.cloud.gateway.routes[0].id=administracion
spring.cloud.gateway.routes[0].uri=${ADMINISTRACION_URL}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/administracion/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=2

# 2. REGISTRO (routes[1])
spring.cloud.gateway.routes[1].id=registro
spring.cloud.gateway.routes[1].uri=${REGISTRO_URL}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/registro/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=2

# 3. NOTIFICACION (routes[2])
spring.cloud.gateway.routes[2].id=notificacion
spring.cloud.gateway.routes[2].uri=${NOTIFICACION_URL}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/notificacion/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=2

# 4. PRONOSTICO (routes[3]) - ARREGLA EL 404 DE PRESUPUESTOS
spring.cloud.gateway.routes[3].id=pronostico
spring.cloud.gateway.routes[3].uri=${PRONOSTICO_URL}
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/pronostico/**
spring.cloud.gateway.routes[3].filters[0]=StripPrefix=2

# 5. REPORTE (routes[4]) - ARREGLA EL 404 DE CASHFLOW/PYL
spring.cloud.gateway.routes[4].id=reporte
spring.cloud.gateway.routes[4].uri=${REPORTE_URL}
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/reporte/**
spring.cloud.gateway.routes[4].filters[0]=StripPrefix=2

# 6. IA (routes[5])
spring.cloud.gateway.routes[5].id=ia
spring.cloud.gateway.routes[5].uri=${IA_URL}
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/ia/**
spring.cloud.gateway.routes[5].filters[0]=StripPrefix=2

# 7. FORECAST (routes[6])
spring.cloud.gateway.routes[6].id=forecast
spring.cloud.gateway.routes[6].uri=${FORECAST_URL}
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/forecast/**
spring.cloud.gateway.routes[6].filters[0]=StripPrefix=2

# ==========================================
# CONFIGURACION GLOBAL
# ==========================================
spring.web.cors.enabled=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*

logging.level.org.springframework.cloud.gateway=INFO
logging.level.reactor.netty=INFO